<!DOCTYPE html>
<html>
  <body>
    <!-- As if this Glitch were a typical HTML CodePen... -->    
    <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
    
    <!-- Use components defined in separate files. -->
    <script src="arrow-key-rotation.js"></script>
    <script src="toggle-play-on-window-click.js"></script>
    <script src="play-on-vrdisplayactivate-or-enter-vr.js"></script>
    <script src="hide-once-playing.js"></script>
    <!--<script src="push-annimation.js"></script>-->
    

    <!-- Specify our scene. -->
    <a-scene>
      <!-- The original example also has this 180 degree rotation, to appear to be going forward. -->
      <a-videosphere id='background' rotation="0 180 0" src="#video" 
                     toggle-play-on-window-click
                     play-on-vrdisplayactivate-or-enter-vr>
      </a-videosphere>
      
      <!-- Define camera with zero user height, movement disabled and arrow key rotation added. -->
      <a-camera user-height="0" wasd-controls-enabled="false" arrow-key-rotation>
        <!-- Text element for display messaging.  Hide once video is playing. -->
        <a-entity id="msg" position="0 -0.3 -1.5" text="align:center; 
                width:3;
                wrapCount:100;
                color:red;
                value:Click to make the video play"
                hide-once-playing="#video">
        </a-entity>
        <a-cursor scale="0.5 0.5" color="#fff"></a-cursor>
      </a-camera>    
      
      <!--<a-box color="gray" position="0 -1 -1.5" rotation="45 0 0" height="0.2" width="2">-->
      <!--  <a-box position="-0.43880848764222424 0.1660736569070969 -0.013576717400473351" height="0.2" color="green" material="" geometry="depth:0.7;width:0.7" >-->
      <!--    <a-animation attribute="color" begin="click" to="white" dur="100"></a-animation>-->
      <!--    <a-animation attribute="color" begin="click" to="green" dur="80" delay="120"></a-animation>-->
          
      <!--  </a-box>-->
      <!--  <a-box position="0.45223135684908344 0.1660736569070969 -0.013576717400473351" height="0.2" color="red" material="" geometry="depth:0.7;width:0.7">-->
      <!--    <a-animation attribute="color" begin="click" to="white" dur="100"></a-animation>-->
      <!--    <a-animation attribute="color" begin="click" to="red" dur="80" delay="120"></a-animation>-->
      <!--  </a-box>-->
      <!--</a-box>-->
      
      
      
      <a-entity geometry="primitive:cone;radiusTop:0.0001;radiusBottom:0.3;height:0.5" rotation="0 0 180" id="pin" position='0, 3, -9' material='color: green'>
        <a-entity geometry="primitive:sphere;radius:0.3" position='0 -0.35 0' material='color: green'></a-entity>
        <a-entity geometry="primitive:circle;radius:0.3" material="side:double;opacity:0.5" position='0 0 0.4' id="bigCircle"></a-entity>
        <a-entity geometry="primitive:circle;radius:0.01" material="side:double;opacity:1" position='0 0 0.5' id="smallCircle">
          <a-animation attribute="radius" begin="mouseenter" dur="1500" to="0.3"></a-animation>
        </a-entity>
        <a-entity
          id='textMessage'
          visible='false'
          position='0 -1 0'
          geometry="primitive: plane; width: auto; height: auto"
          material="color: blue"
          rotation='0 0 180'
          scale='2 2 2'
          text="value: Lorem ipsum dolor sit amet, consectetur adipisicing elit. Magnam quos nemo cupiditate itaque iste porro. Sunt repudiandae quia ab asperiores consequatur accusamus cupiditate, facilis debitis officia culpa nesciunt, unde ut."></a-entity>
      </a-entity>

            <!-- Wait for the vsum dolor sit amet, consectetur adipisicing elit. Fugit cupiditate quaerat quibusdam perspiciatis similique laudantium, harum delectus nemo, veniam vitae facere alias. Est nisi reprehenderit et dolores eum, quos dolorem."></a-entity>
ideo to load. -->
      <a-assets>
        <!-- Single source video. -->
        <video id="video" style="display:none" 
               autoplay loop crossorigin="anonymous" playsinline webkit-playsinline>
          <!-- MP4 video source. -->
          <source type="video/mp4"
               src="/videos/360_VR Master Series _ Free Download _  Pebbly Beach Headland.mp4" />
        </video>
      </a-assets>
    </a-scene>
  
    <script type="text/javascript">
      console.log('script loaded')
        // const videoSource = '/videos/360_VR Master Series _ Free Download _  Pebbly Beach Headland.mp4';
        
        // var background = document.querySelector('#background');
        // console.log(background);
        // background.setAttribute('src', videoSource);
        
        const pin = document.querySelector('#pin');
        let cursorOnObject=false;
        pin.addEventListener('mouseenter', function(){
          pin.setAttribute('scale', {x:2, y:2, z:2});
          cursorOnObject=true;
          
          setTimeout(function() {
            console.log('gazed for a second')
            if(cursorOnObject){
              document.querySelector('#textMessage').setAttribute('visible', 'true');
              
            }
          }, 1500);
        });
        
        pin.addEventListener('mouseleave', function(){
          pin.setAttribute('scale', {x:1, y:1, z:1});
          cursorOnObject=false;
          document.querySelector('#textMessage').setAttribute('visible', 'false');
        });
        
    </script>
  </body>
</html>
